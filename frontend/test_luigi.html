<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Debug Luigi</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #121212; color: white; }
        #debug-box { background: #000; color: #0f0; padding: 15px; border: 1px solid #333; height: 200px; overflow-y: scroll; text-align: left; font-family: monospace; }
        button { padding: 10px; margin: 10px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>üõ†Ô∏è Mode Debug Luigi</h1>
    
    <div id="debug-box">Attente du lancement...<br></div>
    
    <button onclick="testerVapi()">1. Tester si Vapi existe</button>
    <button onclick="lancerAppel()">2. Lancer l'appel (Start)</button>

    <script src="https://cdn.jsdelivr.net/npm/@vapi-ai/web@latest/dist/vapi.browser.js"></script>

    <script>
        const logBox = document.getElementById('debug-box');
        
        function printf(msg) {
            console.log(msg);
            logBox.innerHTML += "> " + msg + "<br>";
            logBox.scrollTop = logBox.scrollHeight;
        }

        let vapiInstance = null;

        function testerVapi() {
            printf("V√©rification de la biblioth√®que...");
            if (typeof Vapi !== 'undefined') {
                printf("‚úÖ SUCC√àS : La biblioth√®que Vapi est charg√©e.");
                try {
                    vapiInstance = new Vapi('70b97def-d8c0-46e1-9dc0-4a6a4ca11bb5'); // Ta cl√©
                    printf("‚úÖ SUCC√àS : Instance cr√©√©e avec ta cl√©.");
                } catch(e) {
                    printf("‚ùå ERREUR : Probl√®me avec la cl√© : " + e.message);
                }
            } else {
                printf("‚ùå √âCHEC : Vapi n'est toujours pas d√©fini (bloqu√© par le client).");
                alert("Le script est bloqu√© ! D√©sactive ton antivirus ou Adblock.");
            }
        }

        function lancerAppel() {
            if (!vapiInstance) {
                printf("‚ùå ERREUR : Tu dois d'abord r√©ussir l'√©tape 1.");
                return;
            }
            printf("Tentative de connexion √† l'assistant : 6f7f8c49..."); // Ton ID
            vapiInstance.start('6f7f8c49-9769-4b3d-8742-0bfa4402e101');
            
            vapiInstance.on('call-start', () => printf("üöÄ EN LIGNE ! Luigi est l√†."));
            vapiInstance.on('error', (e) => printf("‚ùå ERREUR VAPI : " + e.message));
        }
    </script>
</body>
</html>